import{a as B,b as R}from"./chunk-IYITRABY.js";import{a as xe}from"./chunk-5TNV7STC.js";import{e as Y,f as Z,g as ee}from"./chunk-B4UFVJKA.js";import{c as Le}from"./chunk-RDBOAJBO.js";import"./chunk-IX6G3U3V.js";import{a as M,b as ve,c as he,f as Se,g as Te,h as Ce,i as we,j as be,k as Ee}from"./chunk-OHTYLYFK.js";import{a as re,b as fe}from"./chunk-PXAGP5W6.js";import{b as oe,d as le,e as se,h as pe,i as ce,j as me,k as de,l as _e,m as ue,n as ge}from"./chunk-YP4A4WQX.js";import{a as ae}from"./chunk-7UVL7FXH.js";import"./chunk-4KV7BN26.js";import"./chunk-WZLUTRBS.js";import"./chunk-BYXBJQAS.js";import{a as O}from"./chunk-TYSA4IXJ.js";import{a as ne}from"./chunk-NFYRXBCV.js";import{d as te,e as ie}from"./chunk-NAXA2R4W.js";import{$a as C,Ab as s,Hb as w,Ib as J,Jb as b,Kb as f,Lb as h,Mb as G,Oa as o,Qb as q,Rb as z,Sb as W,Tb as c,Ub as m,Wb as P,_a as F,ea as k,fc as N,g as U,gb as E,ha as Q,hc as H,lb as v,nb as L,pb as j,pc as K,qb as A,rb as V,sa as d,sb as I,ta as _,tb as r,ua as $,ub as l,va as X,vb as g,wb as D,xb as T,zb as u}from"./chunk-VRK5N2JK.js";var ye=["ddGeneral"],ke=["popGeneral"],Fe=["tmpFlag"],Pe=["tmpExtraButton"],je=["edtName"],Ae=["tmpAddTranslation"],Ve=["tmpImport"],Ie=["tmpExport"],Ge=["ddLanguage"],De=["dFlag"],Ne=n=>({dark:n});function Be(n,p){n&1&&D(0)}function Oe(n,p){if(n&1){let i=T();r(0,"div",16),u("click",function(){let t=d(i).$implicit,a=s(2);return _(a.selectLanguage(t))}),g(1,"span",18),r(2,"span"),f(3),c(4,"translate"),l()()}if(n&2){let i=p.$implicit;o(),L("fi fi-"+i.flagName),o(2),h(m(4,3,"FLAG."+i.description))}}function Me(n,p){if(n&1){let i=T();V(0,Oe,5,5,"div",15,A),r(2,"div",16),u("click",function(){d(i);let t=s();return b(19).toggle(),_(t.closeDropGeneral())}),g(3,"i",17),c(4,"translate"),r(5,"span"),f(6),c(7,"translate"),l()()}if(n&2){let i,e=s();I((i=e.comunicationService.project())==null?null:i.languages),o(3),v("title",m(4,2,"LANGUAGE.ADD")),o(3),h(m(7,4,"LANGUAGE.ADD"))}}function Re(n,p){n&1&&(g(0,"i",22),r(1,"span"),f(2),c(3,"translate"),l()),n&2&&(o(2),h(m(3,1,"COLUMN")))}function Ue(n,p){n&1&&(g(0,"i",23),r(1,"span"),f(2),c(3,"translate"),l()),n&2&&(o(2),h(m(3,1,"LIST")))}function Qe(n,p){if(n&1){let i=T();r(0,"div",16),u("click",function(){d(i);let t=s();return _(t.showImportPop())}),g(1,"i",19),r(2,"span"),f(3),c(4,"translate"),l()(),r(5,"div",16),u("click",function(){d(i);let t=s();return _(t.showExportPop())}),g(6,"i",20),r(7,"span"),f(8),c(9,"translate"),l()(),r(10,"div",16),u("click",function(){d(i);let t=s();return b(19).toggle(),_(t.closeDropGeneral())}),g(11,"i",21),c(12,"translate"),r(13,"span"),f(14),c(15,"translate"),l()(),r(16,"div",16),u("click",function(){d(i);let t=s();return _(t.switchLayout())}),E(17,Re,4,3)(18,Ue,4,3),l()}if(n&2){let i=s();o(3),h(m(4,5,"IMPORT")),o(5),h(m(9,7,"EXPORT")),o(3),v("title",m(12,9,"LANGUAGE.ADD")),o(3),h(m(15,11,"LANGUAGE.ADD")),o(3),j(17,i.appSettingsService.layoutPage()=="list"?17:18)}}function $e(n,p){n&1&&D(0)}function Xe(n,p){if(n&1){let i=T();r(0,"div",24)(1,"div",25),f(2),c(3,"translate"),l(),r(4,"form",26),u("submit",function(){d(i);let t=s();return _(t.addItemTraslate())}),r(5,"div",27),g(6,"edt-input",28,8),c(8,"translate"),g(9,"edt-input",29),c(10,"translate"),l(),r(11,"div",30)(12,"edt-button",31),c(13,"translate"),u("onClick",function(){d(i);let t=s();return _(t.closeAddTranslation())}),l(),g(14,"edt-button",32),c(15,"translate"),l()()()}if(n&2){let i=s();o(2),G(" ",m(3,7,"TRANSLATION.ADD")," "),o(2),v("formGroup",i.newLangForm),o(2),v("label",m(8,9,"NAME")),o(3),v("label",m(10,11,"VALUE")),o(3),v("label",m(13,13,"CLOSE")),o(2),v("label",m(15,15,"ADD"))("disabled",!i.newLangForm.valid)}}function Je(n,p){if(n&1&&(r(0,"div",40),g(1,"span",45),r(2,"span"),f(3),c(4,"translate"),l()()),n&2){let i,e,t=s(2);o(),L("fi fi-"+((i=t.selectedPopLang())==null?null:i.flagName)),o(2),h(m(4,3,"FLAG."+((e=t.selectedPopLang())==null?null:e.description)))}}function qe(n,p){n&1&&g(0,"i",46)}function ze(n,p){if(n&1){let i=T();r(0,"div",47),u("click",function(){let t=d(i).$implicit;s();let a=b(23);return s().selectImportLang(t),_(a.close())}),g(1,"span",45),r(2,"span"),f(3),c(4,"translate"),l()()}if(n&2){let i=p.$implicit;o(),L("fi fi-"+i.flagName),o(2),h(m(4,3,"FLAG."+i.description))}}function We(n,p){if(n&1){let i=T();r(0,"div",33)(1,"div",34),f(2),c(3,"translate"),l(),r(4,"div",35)(5,"label",36),f(6),c(7,"translate"),l(),r(8,"input",37),u("input",function(t){d(i);let a=s();return _(a.exportCheckChange(t))}),l(),r(9,"label",38),f(10),c(11,"translate"),l(),r(12,"div",39,9),u("click",function(){d(i);let t=s();return _(t.showDDLangExport())}),E(14,Je,5,5,"div",40)(15,qe,1,0),g(16,"i",41),l()(),r(17,"div",42)(18,"edt-button",31),c(19,"translate"),u("onClick",function(){d(i),s();let t=b(10);return _(t.toggle())}),l(),r(20,"edt-button",43),c(21,"translate"),u("onClick",function(){d(i);let t=s(),a=b(10);return t.exportTranslationProject(),_(a.toggle())}),l()()(),r(22,"edt-dropdown",null,10),V(24,ze,5,5,"div",44,A),l()}if(n&2){let i,e=s();L(W(22,Ne,e.appSettingsService.darkTheme())),o(2),G(" ",m(3,12,"EXPORT")," "),o(4),G(" ",m(7,14,"FUNCTION.EXPORT_ALL_LANG")," "),o(2),v("value",e.exportAllLang()),o(2),h(m(11,16,"LANGUAGE.SELECT_EXPORT_LANGUAGE")),o(2),L(e.exportAllLang()?"disabled":""),o(2),j(14,e.selectedPopLang()?14:15),o(4),v("label",m(19,18,"CLOSE")),o(2),v("label",m(21,20,"EXPORT"))("disabled",e.disableExportButton()),o(4),I((i=e.comunicationService.project())==null?null:i.languages)}}function He(n,p){if(n&1&&(r(0,"div",40),g(1,"span",45),r(2,"span"),f(3),c(4,"translate"),l()()),n&2){let i,e,t=s(2);o(),L("fi fi-"+((i=t.selectedPopLang())==null?null:i.flagName)),o(2),h(m(4,3,"FLAG."+((e=t.selectedPopLang())==null?null:e.description)))}}function Ke(n,p){n&1&&g(0,"i",46)}function Ye(n,p){if(n&1){let i=T();r(0,"div",52),u("fileDropped",function(t){d(i);let a=s(2);return _(a.onFileDropped(t))}),r(1,"label",53)(2,"div",54),$(),r(3,"svg",55),g(4,"path",56),l(),X(),r(5,"p",57)(6,"span",58),f(7,"Click to upload"),l(),f(8," or drag and drop"),l(),r(9,"p",59),f(10,"Only file: JSON"),l()(),r(11,"input",60),u("change",function(t){d(i);let a=s(2);return _(a.fileUploaded(t))}),l()()()}}function Ze(n,p){if(n&1){let i=T();r(0,"div",61)(1,"div",62),g(2,"i",63),r(3,"span",45),f(4),l()(),r(5,"i",64),u("click",function(){d(i);let t=s(3);return _(t.files.set([]))}),l()()}if(n&2){let i=p.$implicit;o(4),h(i.name)}}function et(n,p){if(n&1&&V(0,Ze,6,1,"div",61,A),n&2){let i=s(2);I(i.files())}}function tt(n,p){if(n&1){let i=T();r(0,"div",47),u("click",function(){let t=d(i).$implicit;s();let a=b(21);return s().selectImportLang(t),_(a.close())}),g(1,"span",45),r(2,"span"),f(3),c(4,"translate"),l()()}if(n&2){let i=p.$implicit;o(),L("fi fi-"+i.flagName),o(2),h(m(4,3,"FLAG."+i.description))}}function it(n,p){if(n&1){let i=T();r(0,"div",33)(1,"div",34),f(2),c(3,"translate"),l(),r(4,"div",48)(5,"label",49),f(6),c(7,"translate"),l(),r(8,"div",50,9),u("click",function(){d(i);let t=b(9),a=b(21);return _(a.show(t))}),E(10,He,5,5,"div",40)(11,Ke,1,0),g(12,"i",41),l()(),E(13,Ye,12,0,"div",51)(14,et,2,0),r(15,"div",42)(16,"edt-button",31),c(17,"translate"),u("onClick",function(){d(i);let t=s();return b(10).toggle(),_(t.clearPopImport())}),l(),r(18,"edt-button",43),c(19,"translate"),u("onClick",function(){d(i);let t=s(),a=b(10);return t.processFile(),_(a.toggle())}),l()()(),r(20,"edt-dropdown",null,10),V(22,tt,5,5,"div",44,A),l()}if(n&2){let i,e=s();o(2),G(" ",m(3,7,"IMPORT")," "),o(4),h(m(7,9,"LANGUAGE.SELECT_IMPORT_LANGUAGE")),o(4),j(10,e.selectedPopLang()?10:11),o(3),j(13,e.files().length==0?13:14),o(3),v("label",m(17,11,"CLOSE")),o(2),v("label",m(19,13,"IMPORT"))("disabled",e.disabledImport()),o(4),I((i=e.comunicationService.project())==null?null:i.languages)}}var Lt=(()=>{let p=class p{constructor(){this.ddGeneral=C("ddGeneral"),this.popGeneral=C("popGeneral"),this.tmpFlag=C("tmpFlag"),this.tmpExtra=C("tmpExtraButton"),this.edtName=C("edtName"),this.tmpAddTranslation=C("tmpAddTranslation"),this.tmpImport=C("tmpImport"),this.tmpExport=C("tmpExport"),this.ddLanguage=C("ddLanguage"),this.dFlag=C("dFlag"),this.activatedRoute=k(Y),this.router=k(ee),this.fb=k(de),this.projectService=k(M),this.comunicationService=k(R),this.appSettingsService=k(ne),this.ddTemplate=F(null),this.popTemplate=F(null),this.exportAllLang=F(!1),this.selectedPopLang=F(void 0),this.files=F([]),this.disabledImport=N(()=>this.files().length==0||!this.selectedPopLang()),this.disableExportButton=N(()=>!(this.selectedPopLang()||this.exportAllLang())),this.newLangForm=this.fb.group({global:[void 0,[oe.required,xe()]],value:[void 0]}),this.$dropDownControl=this.comunicationService.$dropDownParam.pipe(O()).subscribe(e=>{if(e){switch(e.comunicationType){case"language":this.ddTemplate.set(this.tmpFlag());break;case"extra":this.ddTemplate.set(this.tmpExtra());break}this.ddGeneral()?.show(e.target)}else this.ddTemplate.set(null),this.ddGeneral()?.close()}),this.$popControl=this.comunicationService.$popParam.pipe(O()).subscribe(e=>{if(e){switch(e.comunicationType){case"language":this.popTemplate.set(this.tmpAddTranslation());break;case"import":this.popTemplate.set(this.tmpImport());break;case"export":this.popTemplate.set(this.tmpExport());break}this.popGeneral()?.showPop()}else this.popTemplate.set(null),this.popGeneral()?.closePop()}),this.effectNameTranslation=H(()=>{this.edtName()&&this.edtName()?.focusOnInput()})}closeDropGeneral(){this.comunicationService.setDropDownParam(void 0)}addItemTraslate(){if(this.comunicationService.prjFromStore&&this.newLangForm.valid){let e=this.newLangForm.value,t=[];for(let S=0;S<this.comunicationService.prjFromStore.languages.length;S++){let y={lang:this.comunicationService.prjFromStore.languages[S].flagName};this.comunicationService.prjFromStore.languages[S].flagName==this.comunicationService.selectedLang()?.flagName?y.value=e.value&&e.value():y.value=void 0,t.push(y)}let a=1;this.comunicationService.prjFromStore.translations&&this.comunicationService.prjFromStore.translations.length>0&&(a=he(this.comunicationService.prjFromStore.translations)+1);let x={id:a,global:e.global&&e.global(),items:t};if(this.comunicationService.idParentTranslation){let S=ve(this.comunicationService.prjFromStore.translations,this.comunicationService.idParentTranslation);if(S){let y=S.translation??[];S.translation=[...y,x],S.items=void 0}}else{let S=this.comunicationService.prjFromStore.translations??[];this.comunicationService.prjFromStore.translations=[...S,x]}this.comunicationService.project.set(B(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project()),this.resetFormLang(),this.closeAddTranslation()}}selectLanguage(e){this.comunicationService.selectedLang.set(e),this.closeDropGeneral()}selectImportLang(e){this.selectedPopLang.set(e)}exportCheckChange(e){this.selectedPopLang.set(void 0),this.exportAllLang.set(!this.exportAllLang())}showDDLangExport(){!this.exportAllLang()&&this.dFlag()&&this.ddLanguage()?.show(this.dFlag())}showExportPop(){this.comunicationService.setPopParam({comunicationType:"export"}),this.comunicationService.setDropDownParam(void 0)}showImportPop(){this.comunicationService.setPopParam({comunicationType:"import"}),this.comunicationService.setDropDownParam(void 0)}exportTranslationProject(){let e=this.exportAllLang(),t=this.selectedPopLang();if(e){let a=Ce(this.comunicationService.project()?.translations,this.comunicationService.project()?.languages);be(a)}else{let a=we(this.comunicationService.project()?.translations,t);Ee(a,t)}this.closeDropGeneral()}switchLayout(){this.appSettingsService.layoutPage()=="list"?(this.appSettingsService.setLayoutPage("column"),this.router.navigate(["translations/column",this.comunicationService.idPrj])):(this.appSettingsService.setLayoutPage("list"),this.router.navigate(["translations/list",this.comunicationService.idPrj])),this.comunicationService.setDropDownParam(void 0)}addLangClose(e){e&&(this.comunicationService.loadProjectFromStore(this.comunicationService.idPrj),this.comunicationService.selectProject(this.comunicationService.idPrj))}onFileDropped(e){for(let t=0;t<e.length;t++)if(!e[t].name.toLowerCase().endsWith(".json"))return;this.files.update(t=>[...t,...e])}fileUploaded(e){let t=e.target.files;for(let a=0;a<t.length;a++)if(!t[a].name.toLowerCase().endsWith(".json"))return;this.files.update(a=>[...a,...t])}processFile(){return U(this,null,function*(){let e=this.files();if(e&&e.length>0){let t=yield e[0].text(),a=JSON.parse(t),x=[];this.comunicationService.prjFromStore.translations?(x=this.comunicationService.prjFromStore.translations,Se(x,a,this.selectedPopLang(),this.comunicationService.prjFromStore.languages)):x=Te(a,this.selectedPopLang(),this.comunicationService.prjFromStore.languages),this.comunicationService.prjFromStore.translations=x,this.comunicationService.project.set(B(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project()),this.clearPopImport()}})}closeAddTranslation(){this.comunicationService.idParentTranslation=void 0,this.comunicationService.setPopParam(void 0)}clearPopImport(){this.files.set([]),this.selectedPopLang.set(void 0)}resetFormLang(){this.newLangForm.setValue({global:"",value:""})}};p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=Q({type:p,selectors:[["app-translations"]],viewQuery:function(t,a){t&1&&(w(a.ddGeneral,ye,5),w(a.popGeneral,ke,5),w(a.tmpFlag,Fe,5),w(a.tmpExtra,Pe,5),w(a.edtName,je,5),w(a.tmpAddTranslation,Ae,5),w(a.tmpImport,Ve,5),w(a.tmpExport,Ie,5),w(a.ddLanguage,Ge,5),w(a.dFlag,De,5)),t&2&&J(10)},standalone:!0,features:[q([R,M]),z],decls:20,vars:3,consts:[["ddGeneral",""],["tmpFlag",""],["tmpExtraButton",""],["popGeneral",""],["tmpAddTranslation",""],["tmpExport",""],["tmpImport",""],["addLangComp",""],["edtName",""],["dFlag",""],["ddLanguage",""],[1,"h-full","px-4","overflow-hidden"],[3,"onClose"],[4,"ngTemplateOutlet"],[3,"onClose","prjId"],[1,"flex","gap-2","items-center","w-full","p-4","hover:bg-green-600","hover:bg-opacity-50","hover:cursor-pointer"],[1,"flex","gap-2","items-center","w-full","p-4","hover:bg-green-600","hover:bg-opacity-50","hover:cursor-pointer",3,"click"],[1,"fa-solid","fa-plus","text-xl","hover:cursor-pointer","hover:text-neutral-800",3,"title"],[1,"text-xl"],[1,"fa-solid","fa-file-import","text-xl"],[1,"fa-solid","fa-download","text-xl"],[1,"fa-solid","fa-flag","text-xl","hover:cursor-pointer","hover:text-neutral-800",3,"title"],[1,"fa-solid","fa-table-columns","text-xl"],[1,"fa-solid","fa-table-list","text-xl"],[1,"p-8","defaultText"],[1,"mb-8","font-semibold","text-2xl"],[3,"submit","formGroup"],[1,"flex","flex-col","gap-3","mb-6","w-96"],["formControlName","global",3,"label"],["formControlName","value",3,"label"],[1,"flex","gap-4","justify-end"],["level","secondary",3,"onClick","label"],[3,"label","disabled"],[1,"p-8","w-[500px]","defaultText"],[1,"mb-4","font-semibold","text-2xl"],[1,"grid","grid-cols-2","gap-2","items-center","mb-2"],["for","chkExportAll",1,"block","defaultText","pb-1","pr-1","text-sm"],["id","chkExportAll","type","checkbox",1,"checkStyle","h-5","w-5","cursor-pointer","rounded-md","border","appearance-none","transition-all","text-base-50","checked:bg-green-600",3,"input","value"],["for","dFlagExport",1,"text-nowrap"],["id","dFlagExport",1,"buttonSecondary","flex","justify-between",3,"click"],[1,"flex","items-center","gap-4"],[1,"fa-solid","fa-caret-down","text-lg"],[1,"flex","gap-4","pt-4","justify-end"],[3,"onClick","label","disabled"],[1,"w-full","flex","items-center","gap-4","py-2","px-4","hover:cursor-pointer","hover:bg-green-600/50","hover:text-neutral-50"],[1,"text-base"],[1,"fa-solid","fa-circle-question","text-xl"],[1,"w-full","flex","items-center","gap-4","py-2","px-4","hover:cursor-pointer","hover:bg-green-600/50","hover:text-neutral-50",3,"click"],[1,"flex","items-center","gap-4","mb-2"],["for","dFlag",1,"text-nowrap"],["id","dFlag",1,"buttonSecondary","flex","justify-between","w-full",3,"click"],["edtDragDrop","",1,"flex","items-center","justify-center","w-full","bg-gray-50","rounded-lg","hover:bg-gray-100"],["edtDragDrop","",1,"flex","items-center","justify-center","w-full","bg-gray-50","rounded-lg","hover:bg-gray-100",3,"fileDropped"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-transparent","dark:hover:bg-bray-800","dark:bg-base-800","dark:border-gray-600","dark:hover:border-gray-500","dark:hover:bg-base-900"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 16",1,"w-8","h-8","mb-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"],[1,"mb-2","text-sm","text-gray-500","dark:text-gray-400"],[1,"font-semibold"],[1,"text-xs","text-gray-500","dark:text-gray-400"],["id","dropzone-file","type","file",1,"hidden",3,"change"],[1,"flex","w-full","justify-between","gap-4","items-center","py-2","px-4","rounded-md","bg-neutral-300","dark:bg-base-800"],[1,"flex","gap-4","items-center"],[1,"fa-solid","fa-file","text-xl"],[1,"fa-solid","fa-xmark","text-xl","hover:cursor-pointer",3,"click"]],template:function(t,a){if(t&1){let x=T();r(0,"div",11),g(1,"router-outlet"),l(),r(2,"edt-dropdown",12,0),u("onClose",function(){return d(x),_(a.closeDropGeneral())}),E(4,Be,1,0,"ng-container",13),l(),E(5,Me,8,6,"ng-template",null,1,P)(7,Qe,19,13,"ng-template",null,2,P),r(9,"edt-popup",null,3),E(11,$e,1,0,"ng-container",13),l(),E(12,Xe,16,17,"ng-template",null,4,P)(14,We,26,24,"ng-template",null,5,P)(16,it,24,15,"ng-template",null,6,P),r(18,"add-language",14,7),u("onClose",function(y){return d(x),_(a.addLangClose(y))}),l()}if(t&2){let x;o(4),v("ngTemplateOutlet",a.ddTemplate()),o(7),v("ngTemplateOutlet",a.popTemplate()),o(7),v("prjId",(x=a.comunicationService.project())==null?null:x.id)}},dependencies:[Z,_e,pe,le,se,ue,ce,me,K,Le,ae,re,ge,fe,ie,te],styles:['.checkStyle[_ngcontent-%COMP%]:checked:before{font:var(--fa-font-solid);font-weight:900;content:"\\f00c";height:100%;display:flex;justify-content:center;align-items:center}']});let n=p;return n})();export{Lt as TranslationsComponent};
