import{a as U}from"./chunk-C4WAIE4G.js";import{e as G}from"./chunk-HGIGAB6F.js";import"./chunk-UD77LIP5.js";import"./chunk-C77QN5JS.js";import{a as P,b as Z,d as $,e as ee}from"./chunk-36TIUQCW.js";import"./chunk-IS4TWMAX.js";import"./chunk-MUJ4O2MJ.js";import"./chunk-BYXBJQAS.js";import"./chunk-Z42FMQK5.js";import{a as w,b as q}from"./chunk-OQWHGPHN.js";import"./chunk-XWMUM5E5.js";import{a as J,c as K,e as Q,j as X,k as Y}from"./chunk-7VAD2W5J.js";import{d as W,e as z}from"./chunk-NOK5XJAB.js";import{Cb as V,Db as h,Eb as T,Gb as E,Hb as N,Ib as R,Jb as I,Ka as m,Kb as H,Mb as g,Nb as C,Va as y,bb as u,ca as S,cb as L,eb as M,fa as F,fb as k,gb as D,ib as j,jb as f,kb as A,lb as O,mb as B,nb as l,ob as s,pb as d,qa as c,ra as p,rb as v,sb as _,tb as r}from"./chunk-547F6EYH.js";var ie=()=>[import("./chunk-LSKVS3CO.js").then(t=>t.TranslationRowComponent),import("./chunk-TV3ECHOC.js").then(t=>t.MobileTranslationRowComponent)];function ne(t,a){if(t&1){let n=v();l(0,"div",7),_("click",function(){c(n);let e=r(2);return p(e.addTranslation())}),d(1,"i",8),l(2,"span"),h(3),g(4,"translate"),s()()}t&2&&(m(3),T(C(4,1,"TRANSLATION.ADD")))}function oe(t,a){if(t&1&&u(0,ne,5,3,"div",6),t&2){let n=r();f(0,n.comunicationService.selectedLang()?0:-1)}}function re(t,a){if(t&1&&d(0,"span",21),t&2){let n,i=r(2);j("fi fi-"+((n=i.comunicationService.selectedLang())==null?null:n.flagName))}}function ae(t,a){t&1&&d(0,"i",22)}function le(t,a){if(t&1){let n=v();l(0,"div",7),_("click",function(){c(n);let e=r(2);return p(e.addTranslation())}),d(1,"i",8),l(2,"span"),h(3),g(4,"translate"),s()()}t&2&&(m(3),T(C(4,1,"TRANSLATION.ADD")))}function se(t,a){if(t&1){let n=v();l(0,"div",9)(1,"div",10,0),_("click",function(){c(n);let e=V(2),o=r();return p(o.showDropGeneral(e,"language"))}),u(3,re,1,2,"span",11)(4,ae,1,0),d(5,"i",12),s(),l(6,"div",13),d(7,"i",14),l(8,"input",15),g(9,"translate"),R("ngModelChange",function(e){c(n);let o=r();return N(o.searchValue,e)||(o.searchValue=e),p(e)}),_("blur",function(){c(n);let e=r();return p(e.searchValueChange())}),s()(),l(10,"div",16),_("click",function(){c(n);let e=r();return p(e.clickSortTranslation())}),d(11,"i",17),l(12,"span"),h(13),g(14,"translate"),s()()(),l(15,"div",18)(16,"div",19,1),_("click",function(){c(n);let e=V(17),o=r();return p(o.showDropGeneral(e,"extra"))}),d(18,"i",20),s(),u(19,le,5,3,"div",6),s()}if(t&2){let n=r();m(3),f(3,n.comunicationService.selectedLang()?3:4),m(5),E("ngModel",n.searchValue),k("aria-label",C(9,5,"SEARCH")),m(5),T(C(14,7,"FUNCTION.SORT_GLOBAL")),m(6),f(19,n.comunicationService.selectedLang()?19:-1)}}function ce(t,a){if(t&1){let n=v();l(0,"mobile-translation-row",24),_("onValueChange",function(e){c(n);let o=r(3);return p(o.translationValChange(e))})("onAdd",function(e){c(n);let o=r(3);return p(o.addSubTranslation(e))}),s()}if(t&2){let n=r(2).$implicit,i=r();D("translation",n)("selectedLang",i.comunicationService.selectedLang())}}function pe(t,a){if(t&1){let n=v();l(0,"translation-row",25),_("onValueChange",function(e){c(n);let o=r(3);return p(o.translationValChange(e))})("onAdd",function(e){c(n);let o=r(3);return p(o.addSubTranslation(e))})("onRemove",function(e){c(n);let o=r(3);return p(o.removeTranslation(e))}),s()}if(t&2){let n=r(2).$implicit,i=r();D("translation",n)("selectedLang",i.comunicationService.selectedLang())}}function me(t,a){if(t&1&&u(0,ce,1,2,"mobile-translation-row",23)(1,pe,1,2),t&2){let n=r(2);f(0,n.appSettingsService.isMobile()?0:1)}}function de(t,a){t&1&&(l(0,"div",26),d(1,"div",27),s())}function _e(t,a){t&1&&(u(0,me,2,1)(1,de,2,0),L(2,0,ie,null,1),M(0,-1))}function ue(t,a){t&1&&(l(0,"div",5)(1,"span",28),h(2),g(3,"translate"),s()()),t&2&&(m(2),T(C(3,1,"INFO.NO_TRANSLATION")))}var We=(()=>{let a=class a{constructor(){this.activatedRoute=S(G),this.projectService=S(P),this.comunicationService=S(U),this.appSettingsService=S(q),this.popTemplate=y(null),this.searchValue="",this.comunicationService.idPrj=this.activatedRoute.snapshot.params.id,this.comunicationService.loadProjectFromStore(this.comunicationService.idPrj)}showDropGeneral(i,e){this.comunicationService.setDropDownParam({comunicationType:e,target:i})}removeTranslation(i){let e=this.comunicationService.project()?.translations;e&&(e=e.filter(o=>o.id!=i),this.comunicationService.project.update(o=>(o&&(o.translations=e??[]),o)),this.projectService.updateTranslation(this.comunicationService.project()))}translationValChange(i){let e=this.comunicationService.prjFromStore?.translations;if(e){let o=Z(e,i.translationId),x=this.comunicationService.selectedLang()?.flagName;i.lang&&(x=i.lang);let b=o?.items?.find(te=>te.lang==x);b&&(b.value=i.newVal,this.comunicationService.prjFromStore&&(this.comunicationService.prjFromStore.translations=e??[]),this.comunicationService.project.set(w(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project()))}}clickSortTranslation(){if(this.comunicationService.prjFromStore){let i=$(this.comunicationService.prjFromStore.translations);this.comunicationService.prjFromStore.translations=i??[],this.comunicationService.project.set(w(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project())}}addTranslation(){this.comunicationService.idParentTranslation=void 0,this.comunicationService.setPopParam({comunicationType:"language"})}addSubTranslation(i){this.comunicationService.idParentTranslation=i,this.comunicationService.setPopParam({comunicationType:"language"})}searchValueChange(){if(this.searchValue){let i=this.comunicationService.project();if(this.comunicationService.prjFromStore&&i){let e=w(this.comunicationService.prjFromStore.translations);i.translations=ee(this.searchValue,e),this.comunicationService.project.set(i)}}else this.comunicationService.project.set(w(this.comunicationService.prjFromStore))}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=F({type:a,selectors:[["app-prj-translation"]],standalone:!0,features:[I([P]),H],decls:8,vars:6,consts:[["dFlag",""],["dMenu",""],[1,"flex","flex-col","justify-center","items-center","defaultText"],[1,"flex","items-center","pb-3","borderBottom","z-20"],[1,"listHeight","w-2/3","px-4","overflow-y-auto"],[1,"p-12","text-center","text-lg"],[1,"buttonPrimary"],[1,"buttonPrimary",3,"click"],[1,"fa-solid","fa-plus","text-base","hover:cursor-pointer"],[1,"flex","gap-4","items-center"],[1,"buttonSecondary",3,"click"],[1,"text-base",3,"class"],[1,"fa-solid","fa-caret-down","text-lg"],[1,"flex","gap-2","items-center","py-2","px-3","border","border-neutral-400","rounded-md","bg-neutral-50","dark:bg-base-800/50"],[1,"fa-solid","fa-magnifying-glass"],["type","text",1,"appearance-none","bg-transparent","outline-none",3,"ngModelChange","blur","ngModel"],[1,"buttonSecondary","!py-2",3,"click"],[1,"fa-solid","fa-arrow-down-a-z"],[1,"flex","gap-2"],[1,"buttonSecondary","!px-4",3,"click"],[1,"fa-solid","fa-ellipsis-vertical","text-base","hover:cursor-pointer"],[1,"text-base"],[1,"fa-solid","fa-circle-question","text-xl"],[3,"translation","selectedLang"],[3,"onValueChange","onAdd","translation","selectedLang"],[3,"onValueChange","onAdd","onRemove","translation","selectedLang"],[1,"flex","items-center","px-3","w-2/3","h-[34px]","animate-pulse"],[1,"h-2.5","rounded-full","w-full","mb-4"],[1,"font-semibold","text-neutral-600","dark:","dark:text-neutral-500"]],template:function(e,o){if(e&1&&(l(0,"div",2)(1,"div",3),u(2,oe,1,1)(3,se,20,9),s(),l(4,"div",4),O(5,_e,4,0,null,null,A,!1,ue,4,3,"div",5),s()()),e&2){let x;m(),j(o.appSettingsService.isMobile()?"w-full mx-4 flex-row-reverse":"w-2/3 justify-between"),m(),f(2,o.appSettingsService.isMobile()?2:3),m(2),j(o.appSettingsService.isMobile()?"w-full":"w-2/3"),m(),B((x=o.comunicationService.project())==null?null:x.translations)}},dependencies:[X,J,K,Q,Y,z,W],styles:[".tempCol[_ngcontent-%COMP%]{grid-template-columns:200px auto 86px}.listHeight[_ngcontent-%COMP%]{height:calc(100vh - 182px)}"]});let t=a;return t})();export{We as PrjTranslationComponent};
