import{a as Pt}from"./chunk-C4WAIE4G.js";import{e as St}from"./chunk-HGIGAB6F.js";import{b as et,c as Zt}from"./chunk-7RBQI2FH.js";import{a as Ft,b as Ht,d as Ut,e as Qt}from"./chunk-36TIUQCW.js";import{k as Mt,l as jt,m as Et}from"./chunk-IS4TWMAX.js";import"./chunk-Z42FMQK5.js";import{a as E,b as Nt}from"./chunk-OQWHGPHN.js";import{a as Yt}from"./chunk-XWMUM5E5.js";import{a as Rt,c as Ot,e as Bt,j as Vt,l as Lt}from"./chunk-7VAD2W5J.js";import{d as zt,e as At}from"./chunk-NOK5XJAB.js";import{$ as st,Aa as H,Cb as gt,D as ct,Db as g,Eb as M,Fb as G,Gb as _t,Hb as xt,Ib as yt,J as mt,Jb as wt,Ka as d,Kb as j,La as b,Lb as kt,Mb as _,Na as lt,Nb as x,U as O,Ua as bt,Va as ut,Vb as Dt,Wb as tt,Ya as q,Yb as Ct,Z as B,Za as K,Zb as Tt,_b as It,a as it,bb as I,ca as C,ea as V,fa as T,fb as S,ga as L,gb as k,ha as y,hb as X,ib as U,jb as Q,kb as pt,lb as ft,m as P,mb as ht,n as rt,nb as c,ob as m,pb as h,qa as p,qb as Y,r as dt,ra as f,rb as w,sb as u,t as R,tb as v,wb as J,xb as vt,yb as Z,zb as $}from"./chunk-547F6EYH.js";var Gt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=L({type:t}),t.\u0275inj=B({imports:[et,Zt,et]});let n=t;return n})();var ot=class{constructor(){this.expansionModel=new Et(!0)}toggle(t){this.expansionModel.toggle(this._trackByValue(t))}expand(t){this.expansionModel.select(this._trackByValue(t))}collapse(t){this.expansionModel.deselect(this._trackByValue(t))}isExpanded(t){return this.expansionModel.isSelected(this._trackByValue(t))}toggleDescendants(t){this.expansionModel.isSelected(this._trackByValue(t))?this.collapseDescendants(t):this.expandDescendants(t)}collapseAll(){this.expansionModel.clear()}expandDescendants(t){let i=[t];i.push(...this.getDescendants(t)),this.expansionModel.select(...i.map(e=>this._trackByValue(e)))}collapseDescendants(t){let i=[t];i.push(...this.getDescendants(t)),this.expansionModel.deselect(...i.map(e=>this._trackByValue(e)))}_trackByValue(t){return this.trackBy?this.trackBy(t):t}};var W=class extends ot{constructor(t,i){super(),this.getChildren=t,this.options=i,this.options&&(this.trackBy=this.options.trackBy)}expandAll(){this.expansionModel.clear();let t=this.dataNodes.reduce((i,e)=>[...i,...this.getDescendants(e),e],[]);this.expansionModel.select(...t.map(i=>this._trackByValue(i)))}getDescendants(t){let i=[];return this._getDescendants(i,t),i.splice(1)}_getDescendants(t,i){t.push(i);let e=this.getChildren(i);Array.isArray(e)?e.forEach(o=>this._getDescendants(t,o)):R(e)&&e.pipe(mt(1),ct(Boolean)).subscribe(o=>{for(let a of o)this._getDescendants(t,a)})}},Wt=new st("CDK_TREE_NODE_OUTLET_NODE"),z=(()=>{let t=class t{constructor(e,o){this.viewContainer=e,this._node=o}};t.\u0275fac=function(o){return new(o||t)(b(bt),b(Wt,8))},t.\u0275dir=y({type:t,selectors:[["","cdkTreeNodeOutlet",""]],standalone:!0});let n=t;return n})(),nt=class{constructor(t){this.$implicit=t}},at=(()=>{let t=class t{constructor(e){this.template=e}};t.\u0275fac=function(o){return new(o||t)(b(lt))},t.\u0275dir=y({type:t,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[V.None,"cdkTreeNodeDefWhen","when"]},standalone:!0});let n=t;return n})();var N=(()=>{let t=class t{get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}constructor(e,o){this._differs=e,this._changeDetectorRef=o,this._onDestroy=new P,this._levels=new Map,this.viewChange=new rt({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy),this.treeControl}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){let e=this._nodeDefs.filter(o=>!o.when);e.length>1,this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;Mt(this._dataSource)?e=this._dataSource.connect(this):R(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=dt(this._dataSource)),e&&(this._dataSubscription=e.pipe(O(this._onDestroy)).subscribe(o=>this.renderNodeChanges(o)))}renderNodeChanges(e,o=this._dataDiffer,a=this._nodeOutlet.viewContainer,r){let s=o.diff(e);s&&(s.forEachOperation((l,D,F)=>{if(l.previousIndex==null)this.insertNode(e[F],F,a,r);else if(F==null)a.remove(D),this._levels.delete(l.item);else{let Jt=a.get(D);a.move(Jt,F)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,o){if(this._nodeDefs.length===1)return this._nodeDefs.first;let a=this._nodeDefs.find(r=>r.when&&r.when(o,e))||this._defaultNodeDef;return a}insertNode(e,o,a,r){let s=this._getNodeDef(e,o),l=new nt(e);this.treeControl.getLevel?l.level=this.treeControl.getLevel(e):typeof r<"u"&&this._levels.has(r)?l.level=this._levels.get(r)+1:l.level=0,this._levels.set(e,l.level),(a||this._nodeOutlet.viewContainer).createEmbeddedView(s.template,l,o),A.mostRecentTreeNode&&(A.mostRecentTreeNode.data=e)}};t.\u0275fac=function(o){return new(o||t)(b(tt),b(Dt))},t.\u0275cmp=T({type:t,selectors:[["cdk-tree"]],contentQueries:function(o,a,r){if(o&1&&J(r,at,5),o&2){let s;Z(s=$())&&(a._nodeDefs=s)}},viewQuery:function(o,a){if(o&1&&vt(z,7),o&2){let r;Z(r=$())&&(a._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],standalone:!0,features:[j],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(o,a){o&1&&Y(0,0)},dependencies:[z],encapsulation:2});let n=t;return n})(),A=(()=>{let t=class t{get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(e,o){this._elementRef=e,this._tree=o,this._destroyed=new P,this._dataChanges=new P,t.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=te(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){t.mostRecentTreeNode===this&&(t.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){!this._tree.treeControl.isExpandable&&this._tree.treeControl.getChildren,this.role="treeitem"}};t.mostRecentTreeNode=null,t.\u0275fac=function(o){return new(o||t)(b(H),b(N))},t.\u0275dir=y({type:t,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(o,a){o&2&&S("aria-expanded",a.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"],standalone:!0});let n=t;return n})();function te(n){let t=n.parentElement;for(;t&&!ee(t);)t=t.parentElement;return t?t.classList.contains("cdk-nested-tree-node")?Tt(t.getAttribute("aria-level")):0:-1}function ee(n){let t=n.classList;return!!(t?.contains("cdk-nested-tree-node")||t?.contains("cdk-tree"))}var qt=(()=>{let t=class t extends A{constructor(e,o,a){super(e,o),this._differs=a}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),this._tree.treeControl.getChildren;let e=this._tree.treeControl.getChildren(this.data);Array.isArray(e)?this.updateChildrenNodes(e):R(e)&&e.pipe(O(this._destroyed)).subscribe(o=>this.updateChildrenNodes(o)),this.nodeOutlet.changes.pipe(O(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){let o=this._getNodeOutlet();if(e&&(this._children=e),o&&this._children){let a=o.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,a,this._data)}else this._dataDiffer.diff([])}_clear(){let e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){let e=this.nodeOutlet;return e&&e.find(o=>!o._node||o._node===this)}};t.\u0275fac=function(o){return new(o||t)(b(H),b(N),b(tt))},t.\u0275dir=y({type:t,selectors:[["cdk-nested-tree-node"]],contentQueries:function(o,a,r){if(o&1&&J(r,z,5),o&2){let s;Z(s=$())&&(a.nodeOutlet=s)}},hostAttrs:[1,"cdk-nested-tree-node"],exportAs:["cdkNestedTreeNode"],standalone:!0,features:[wt([{provide:A,useExisting:t},{provide:Wt,useExisting:t}]),q]});let n=t;return n})();var Kt=(()=>{let t=class t{constructor(e,o){this._tree=e,this._treeNode=o,this.recursive=!1}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}};t.\u0275fac=function(o){return new(o||t)(b(N),b(A))},t.\u0275dir=y({type:t,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(o,a){o&1&&u("click",function(s){return a._toggle(s)})},inputs:{recursive:[V.HasDecoratorInputTransform,"cdkTreeNodeToggleRecursive","recursive",Ct]},standalone:!0,features:[K]});let n=t;return n})();var Xt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=L({type:t}),t.\u0275inj=B({});let n=t;return n})();var ne=n=>({dark:n});function ae(n,t){if(n&1){let i=w();c(0,"div",22),u("click",function(){p(i);let o=v();return f(o.addTranslation())}),h(1,"i",23),c(2,"span"),g(3),_(4,"translate"),m()()}n&2&&(d(3),M(x(4,1,"TRANSLATION.ADD")))}function ie(n,t){if(n&1){let i=w();c(0,"cdk-nested-tree-node",24)(1,"div",25),u("click",function(){let o=p(i).$implicit,a=v();return f(a.loadTranslation(o))}),h(2,"i",26),g(3),m()()}if(n&2){let i,e=t.$implicit,o=v();d(),U(((i=o.selectedTranslation())==null?null:i.id)==e.id?"selected px-2 py-1":"px-2 py-1"),d(2),G(" ",e.global," ")}}function re(n,t){n&1&&h(0,"i",30)}function de(n,t){n&1&&h(0,"i",33)}function ce(n,t){if(n&1){let i=w();c(0,"cdk-nested-tree-node",27)(1,"div",28)(2,"div",29),I(3,re,1,0,"i",30)(4,de,1,0),g(5),m(),c(6,"i",31),_(7,"translate"),u("click",function(){let o=p(i).$implicit,a=v();return f(a.addSubTranslation(o.id))}),m()(),c(8,"div"),Y(9,32),m()()}if(n&2){let i=t.$implicit,e=v();d(3),Q(3,e.treeControl.isExpanded(i)?3:4),d(2),G(" ",i.global," "),d(),k("title",x(7,5,"TRANSLATION.ADD")),d(2),X("example-tree-invisible",!e.treeControl.isExpanded(i))}}function me(n,t){if(n&1){let i=w();c(0,"div",19)(1,"div",34),u("click",function(){p(i);let o=v();return f(o.addSubTranslation(o.selectedTranslation().id))}),h(2,"i",35),_(3,"translate"),m(),c(4,"span",36),g(5),m()()}if(n&2){let i,e=v();d(2),k("title",x(3,2,"TRANSLATION.ADD")),d(3),M((i=(i=e.selectedTranslation())==null?null:i.global)!==null&&i!==void 0?i:"")}}function se(n,t){if(n&1){let i=w();c(0,"div",20)(1,"div",37),g(2),_(3,"translate"),m(),c(4,"div",38)(5,"edt-input",39),u("onBlur",function(o){let a=p(i).$implicit,r=v();return f(r.valChange(o,r.selectedTranslation().id,a.lang))}),m()()()}if(n&2){let i=t.$implicit,e=v();d(2),G(" ",x(3,2,"FLAG."+e.getDescriptionLang(i.lang))," "),d(3),k("value",i.value)}}function le(n,t){n&1&&(c(0,"div",21)(1,"span",40),g(2),_(3,"translate"),m()()),n&2&&(d(2),M(x(3,1,"INFO.NO_TRANSLATION_SELECTED")))}var qe=(()=>{let t=class t{constructor(){this.activatedRoute=C(St),this.projectService=C(Ft),this.comunicationService=C(Pt),this.appSettingsService=C(Nt),this.searchValue="",this.selectedTranslation=ut(void 0),this.treeControl=new W(e=>e.translation),this.dataSource=It(()=>new jt(this.comunicationService.project()?.translations??[])),this.hasChild=(e,o)=>!!o.translation&&o.translation.length>0,this.comunicationService.idPrj=this.activatedRoute.snapshot.params.id,this.comunicationService.loadProjectFromStore(this.comunicationService.idPrj)}showDropGeneral(e,o){this.comunicationService.setDropDownParam({comunicationType:o,target:e})}clickSortTranslation(){if(this.comunicationService.prjFromStore){let e=Ut(this.comunicationService.prjFromStore.translations);this.comunicationService.prjFromStore.translations=e??[],this.comunicationService.project.set(E(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project())}}addTranslation(){this.comunicationService.idParentTranslation=void 0,this.comunicationService.setPopParam({comunicationType:"language"})}searchValueChange(){if(this.searchValue){let e=this.comunicationService.project();if(this.comunicationService.prjFromStore&&e){let o=E(this.comunicationService.prjFromStore.translations);e.translations=Qt(this.searchValue,o),this.comunicationService.project.set(it({},e))}}else this.comunicationService.project.set(E(this.comunicationService.prjFromStore))}loadTranslation(e){this.selectedTranslation.set(e)}addSubTranslation(e){this.comunicationService.idParentTranslation=e,this.comunicationService.setPopParam({comunicationType:"language"})}valChange(e,o,a){let r=this.comunicationService.prjFromStore?.translations;if(r){let l=Ht(r,o)?.items?.find(D=>D.lang==a);l&&(l.value=e,this.comunicationService.prjFromStore&&(this.comunicationService.prjFromStore.translations=r??[]),this.comunicationService.project.set(E(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project()))}}getDescriptionLang(e){let o="";return e&&(o=Yt.find(a=>a.flagName==e)?.description??""),o}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=T({type:t,selectors:[["app-column-translations"]],standalone:!0,features:[j],decls:27,vars:17,consts:[["dMenu",""],[1,"flex","flex-col","h-full","justify-center","items-center","defaultText","overflow-hidden"],[1,"flex","justify-between","w-2/3","pb-3","mb-3","borderBottom","z-20"],[1,"flex","gap-4","items-center"],[1,"flex","gap-2","items-center","py-2","px-3","border","border-neutral-400","rounded-md","bg-neutral-50","dark:bg-base-800/50"],[1,"fa-solid","fa-magnifying-glass"],["type","text",1,"appearance-none","bg-transparent","outline-none",3,"ngModelChange","blur","ngModel"],[1,"buttonSecondary","!py-2",3,"click"],[1,"fa-solid","fa-arrow-down-a-z"],[1,"flex","gap-2"],[1,"buttonSecondary","!px-4",3,"click"],[1,"fa-solid","fa-ellipsis-vertical","text-base","hover:cursor-pointer"],[1,"buttonPrimary"],[1,"flex","h-full","w-2/3","pb-3","mb-3","z-20","overflow-hidden"],[1,"w-1/3","treeHeight","border-r","border-black/10","dark:border-white/10","overflow-y-auto","pe-2"],[3,"dataSource","treeControl"],["class","example-tree-node hover:cursor-pointer pe-2",4,"cdkTreeNodeDef"],["class","example-tree-node ps-2",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],[1,"flex","flex-col","w-full","gap-2","px-2","pb-2"],[1,"flex","gap-2","text-lg"],[1,"grid","grid-cols-2","gap-2","tempCol","items-center","defaultText","py-2","px-4","bg-base-600/10","dark:bg-white/10","rounded-md","hover:border-transparent"],[1,"w-full","p-12","text-center","text-lg"],[1,"buttonPrimary",3,"click"],[1,"fa-solid","fa-plus","text-base","hover:cursor-pointer"],[1,"example-tree-node","hover:cursor-pointer","pe-2"],[3,"click"],[1,"fa-solid","fa-spell-check","text-xs"],[1,"example-tree-node","ps-2"],[1,"flex","justify-between","py-1"],["cdkTreeNodeToggle","",1,"hover:cursor-pointer"],[1,"fa-solid","fa-folder-open"],[1,"fa-solid","fa-plus","hover:cursor-pointer","hover:text-green-700",3,"click","title"],["cdkTreeNodeOutlet",""],[1,"fa-solid","fa-folder","hover:cursor-pointer"],[1,"buttonSecondary","!text-sm",3,"click"],[1,"fa-solid","fa-plus","hover:cursor-pointer",3,"title"],[1,"font-semibold"],[1,"text-left"],[1,"text-base","font-medium"],[3,"onBlur","value"],[1,"font-semibold","text-neutral-600","dark:","dark:text-neutral-500"]],template:function(o,a){if(o&1){let r=w();c(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),h(4,"i",5),c(5,"input",6),_(6,"translate"),yt("ngModelChange",function(l){return p(r),xt(a.searchValue,l)||(a.searchValue=l),f(l)}),u("blur",function(){return p(r),f(a.searchValueChange())}),m()(),c(7,"div",7),u("click",function(){return p(r),f(a.clickSortTranslation())}),h(8,"i",8),c(9,"span"),g(10),_(11,"translate"),m()()(),c(12,"div",9)(13,"div",10,0),u("click",function(){p(r);let l=gt(14);return f(a.showDropGeneral(l,"extra"))}),h(15,"i",11),m(),I(16,ae,5,3,"div",12),m()(),c(17,"div",13)(18,"div",14)(19,"cdk-tree",15),I(20,ie,4,3,"cdk-nested-tree-node",16)(21,ce,10,7,"cdk-nested-tree-node",17),m()(),c(22,"div",18),I(23,me,6,4,"div",19),ft(24,se,6,4,"div",20,pt,!1,le,4,3,"div",21),m()()()}if(o&2){let r;d(5),_t("ngModel",a.searchValue),S("aria-label",x(6,11,"SEARCH")),d(5),M(x(11,13,"FUNCTION.SORT_GLOBAL")),d(6),Q(16,a.comunicationService.selectedLang()?16:-1),d(),U(kt(15,ne,a.appSettingsService.darkTheme())),d(2),k("dataSource",a.dataSource())("treeControl",a.treeControl),d(2),k("cdkTreeNodeDefWhen",a.hasChild),d(2),Q(23,a.selectedTranslation()?23:-1),d(),ht((r=a.selectedTranslation())==null?null:r.items)}},dependencies:[Vt,Rt,Ot,Bt,Xt,qt,at,Kt,N,z,Gt,Lt,At,zt],styles:[".layoutGrid[_ngcontent-%COMP%]{grid-template-columns:30% auto}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree-node[_ngcontent-%COMP%]{display:block}.example-tree-node[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border-radius:.375rem;background-color:#0000001a}.example-tree-node[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]:where(.dark, .dark[_ngcontent-%COMP%]   *)[_ngcontent-%COMP%]{background-color:#ffffff1a}.example-tree-node[_ngcontent-%COMP%]   .example-tree-node[_ngcontent-%COMP%]{padding-left:20px}.treeHeight[_ngcontent-%COMP%]{height:calc(100vh - 210px)}"]});let n=t;return n})();export{qe as ColumnTranslationsComponent};
