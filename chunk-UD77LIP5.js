import{d as J}from"./chunk-C77QN5JS.js";import{a as j,l as ee}from"./chunk-36TIUQCW.js";import{a as W,b as Z}from"./chunk-MUJ4O2MJ.js";import{b as H,c as K,h as E}from"./chunk-OQWHGPHN.js";import{a as te}from"./chunk-XWMUM5E5.js";import{j as X,k as Y}from"./chunk-7VAD2W5J.js";import{d as z,e as R}from"./chunk-NOK5XJAB.js";import{Ab as D,Bb as U,Cb as v,Db as L,Eb as x,Fb as Q,Jb as q,Ka as n,Kb as O,Mb as p,Nb as c,Va as A,Wa as k,_b as $,bb as M,ca as _,ea as F,fa as I,gb as h,ib as S,jb as B,kb as G,lb as V,mb as N,nb as o,ob as l,pb as m,qa as g,ra as u,rb as b,sb as f,tb as y,ya as w,za as P}from"./chunk-547F6EYH.js";var ne=["edtAddLang"];function ae(a,r){if(a&1&&(o(0,"div",9),m(1,"span",15),o(2,"span"),L(3),p(4,"translate"),l()()),a&2){let s,i,e=y();n(),S("fi fi-"+((s=e.selectedPopLang())==null?null:s.flagName)),n(2),x(c(4,3,"FLAG."+((i=e.selectedPopLang())==null?null:i.description)))}}function oe(a,r){a&1&&m(0,"i",16)}function re(a,r){if(a&1){let s=b();o(0,"div",17),f("click",function(){let e=g(s).$implicit,t=y(),d=v(21);return t.selectedPopLang.set(e),u(d.close())}),m(1,"span",15),o(2,"span"),L(3),p(4,"translate"),l()()}if(a&2){let s=r.$implicit;n(),S("fi fi-"+s.flagName),n(2),x(c(4,3,"FLAG."+s.description))}}var Ce=(()=>{let r=class r{constructor(){this.edtAddLang=k("edtAddLang"),this.storageService=_(K),this.projectService=_(j),this.appSettingsService=_(H),this.prjId=P(void 0),this.onShow=w(),this.onClose=w(),this.selectedPopLang=A(void 0),this.languageList=A([]),this.selectableLang=$(()=>{let i=this.prjId(),e=[];return i?e=this.projectService.getProjectById(i)?.languages??[]:e=this.languageList(),te.filter(t=>!e.find(d=>d.flagName==t.flagName))})}toggle(){this.edtAddLang()?.toggle(),this.edtAddLang()?.show?(this.languageList.set(this.storageService.retrieveObj(E)??[]),this.onShow.emit()):this.onClose.emit(!1)}addLang(){if(!this.selectedPopLang()){alert("Selezionare una lingua!");return}let i=this.prjId(),e=this.selectedPopLang();if(i){let t=this.projectService.getProjectById(i);t&&e&&(t?.languages.push(e),t.translations&&ee(t.translations,e),this.projectService.updateTranslation(t))}else this.languageList.update(t=>(e&&t.push(e),[...t])),this.storageService.store(E,this.languageList());this.selectedPopLang.set(void 0),this.edtAddLang()?.toggle(),this.onClose.emit(!0)}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=I({type:r,selectors:[["add-language"]],viewQuery:function(e,t){e&1&&D(t.edtAddLang,ne,5),e&2&&U()},inputs:{prjId:[F.SignalBased,"prjId"]},outputs:{onShow:"onShow",onClose:"onClose"},standalone:!0,features:[q([j]),O],decls:24,vars:16,consts:[["edtAddLang",""],["dFlag",""],["ddLanguage",""],[3,"isMobile"],[1,"p-8","defaultText"],[1,"mb-4","font-semibold","text-xl","uppercase"],[1,"flex","flex-col","gap-3","mb-6","w-full"],["for","dFlagExport",1,"text-nowrap"],["id","dFlagExport",1,"buttonSecondary","flex","justify-between",3,"click"],[1,"flex","items-center","gap-4"],[1,"fa-solid","fa-caret-down","text-lg"],[1,"flex","gap-4","justify-end"],["level","secondary",3,"onClick","label"],[3,"onClick","label"],[1,"w-full","flex","items-center","gap-4","py-2","px-4","hover:cursor-pointer","hover:bg-green-600/50","hover:text-neutral-50"],[1,"text-base"],[1,"fa-solid","fa-circle-question","text-xl"],[1,"w-full","flex","items-center","gap-4","py-2","px-4","hover:cursor-pointer","hover:bg-green-600/50","hover:text-neutral-50",3,"click"]],template:function(e,t){if(e&1){let d=b();o(0,"edt-popup",3,0)(2,"div",4)(3,"div",5),L(4),p(5,"translate"),l(),o(6,"div",6)(7,"label",7),L(8),p(9,"translate"),l(),o(10,"div",8,1),f("click",function(){g(d);let C=v(11),ie=v(21);return u(ie.show(C))}),M(12,ae,5,5,"div",9)(13,oe,1,0),m(14,"i",10),l()(),o(15,"div",11)(16,"edt-button",12),p(17,"translate"),f("onClick",function(){g(d);let C=v(1);return u(C.toggle())}),l(),o(18,"edt-button",13),p(19,"translate"),f("onClick",function(){return g(d),u(t.addLang())}),l()()(),o(20,"edt-dropdown",null,2),V(22,re,5,5,"div",14,G),l()()}e&2&&(h("isMobile",t.appSettingsService.isMobile()),n(2),S(t.appSettingsService.isMobile()?"w-full":"w-[500px]"),n(2),Q(" ",c(5,8,"LANGUAGE.ADD")," "),n(4),x(c(9,10,"LANGUAGE.LANGUAGE")),n(4),B(12,t.selectedPopLang()?12:13),n(4),h("label",c(17,12,"CLOSE")),n(2),h("label",c(19,14,"ADD")),n(4),N(t.selectableLang()))},dependencies:[X,Y,W,Z,J,R,z]});let a=r;return a})();export{Ce as a};
