import{a as S,b as U}from"./chunk-IYITRABY.js";import{e as W}from"./chunk-B4UFVJKA.js";import"./chunk-RDBOAJBO.js";import"./chunk-IX6G3U3V.js";import{a as V,b as Z,d as $,e as ee}from"./chunk-OHTYLYFK.js";import"./chunk-PXAGP5W6.js";import{a as J,d as K,g as Q,l as X,m as Y}from"./chunk-YP4A4WQX.js";import"./chunk-7UVL7FXH.js";import"./chunk-4KV7BN26.js";import"./chunk-WZLUTRBS.js";import"./chunk-BYXBJQAS.js";import"./chunk-TYSA4IXJ.js";import"./chunk-NFYRXBCV.js";import{d as z,e as q}from"./chunk-NAXA2R4W.js";import{Ab as f,Jb as P,Kb as j,Lb as w,Nb as N,Oa as u,Ob as H,Pb as R,Qb as I,Rb as G,Tb as g,Ub as h,_a as b,ea as T,gb as C,ha as y,hb as F,jb as k,kb as O,lb as B,nb as E,pb as D,qb as L,rb as M,sa as s,sb as A,ta as c,tb as r,ub as a,vb as d,xb as x,zb as v}from"./chunk-VRK5N2JK.js";var te=()=>[import("./chunk-UX5PYULY.js").then(i=>i.TranslationRowComponent)];function ie(i,o){if(i&1&&d(0,"span",19),i&2){let l,n=f();E("fi fi-"+((l=n.comunicationService.selectedLang())==null?null:l.flagName))}}function ne(i,o){i&1&&d(0,"i",20)}function oe(i,o){if(i&1){let l=x();r(0,"div",21),v("click",function(){s(l);let t=f();return c(t.addTranslation())}),d(1,"i",22),r(2,"span"),j(3),g(4,"translate"),a()()}i&2&&(u(3),w(h(4,1,"TRANSLATION.ADD")))}function re(i,o){if(i&1){let l=x();r(0,"translation-row",23),v("onValueChange",function(t){s(l);let e=f(2);return c(e.translationValChange(t.newVal,t.translationId))})("onAdd",function(t){s(l);let e=f(2);return c(e.addSubTranslation(t))})("onRemove",function(t){s(l);let e=f(2);return c(e.removeTranslation(t))}),a()}if(i&2){let l=f().$implicit,n=f();B("translation",l)("selectedLang",n.comunicationService.selectedLang())}}function ae(i,o){i&1&&(r(0,"div",24),d(1,"div",25),a())}function le(i,o){i&1&&(C(0,re,1,2)(1,ae,2,0),F(2,0,te,null,1),k(0,-1))}function se(i,o){i&1&&(r(0,"div",18)(1,"span",26),j(2),g(3,"translate"),a()()),i&2&&(u(2),w(h(3,1,"INFO.NO_TRANSLATION")))}var Me=(()=>{let o=class o{constructor(){this.activatedRoute=T(W),this.projectService=T(V),this.comunicationService=T(U),this.popTemplate=b(null),this.searchValue="",this.comunicationService.idPrj=this.activatedRoute.snapshot.params.id,this.comunicationService.loadProjectFromStore(this.comunicationService.idPrj)}showDropGeneral(n,t){this.comunicationService.setDropDownParam({comunicationType:t,target:n})}removeTranslation(n){let t=this.comunicationService.project()?.translations;t&&(t=t.filter(e=>e.id!=n),this.comunicationService.project.update(e=>(e&&(e.translations=t??[]),e)),this.projectService.updateTranslation(this.comunicationService.project()))}translationValChange(n,t){let e=this.comunicationService.prjFromStore?.translations;if(e){let _=Z(e,t)?.items?.find(m=>m.lang==this.comunicationService.selectedLang()?.flagName);_&&(_.value=n,this.comunicationService.prjFromStore&&(this.comunicationService.prjFromStore.translations=e??[]),this.comunicationService.project.set(S(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project()))}}clickSortTranslation(){if(this.comunicationService.prjFromStore){let n=$(this.comunicationService.prjFromStore.translations);this.comunicationService.prjFromStore.translations=n??[],this.comunicationService.project.set(S(this.comunicationService.prjFromStore)),this.projectService.updateTranslation(this.comunicationService.project())}}addTranslation(){this.comunicationService.idParentTranslation=void 0,this.comunicationService.setPopParam({comunicationType:"language"})}addSubTranslation(n){this.comunicationService.idParentTranslation=n,this.comunicationService.setPopParam({comunicationType:"language"})}searchValueChange(){if(this.searchValue){let n=this.comunicationService.project();if(this.comunicationService.prjFromStore&&n){let t=S(this.comunicationService.prjFromStore.translations);n.translations=ee(this.searchValue,t),this.comunicationService.project.set(n)}}else this.comunicationService.project.set(S(this.comunicationService.prjFromStore))}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=y({type:o,selectors:[["app-prj-translation"]],standalone:!0,features:[I([V]),G],decls:26,vars:10,consts:[["dFlag",""],["dMenu",""],[1,"flex","flex-col","justify-center","items-center","defaultText"],[1,"flex","justify-between","w-2/3","pb-3","borderBottom","z-20"],[1,"flex","gap-4","items-center"],[1,"buttonSecondary",3,"click"],[1,"text-base",3,"class"],[1,"fa-solid","fa-caret-down","text-lg"],[1,"flex","gap-2","items-center","py-2","px-3","border","border-neutral-400","rounded-md","bg-neutral-50","dark:bg-base-800/50"],[1,"fa-solid","fa-magnifying-glass"],["type","text",1,"appearance-none","bg-transparent","outline-none",3,"ngModelChange","blur","ngModel"],[1,"buttonSecondary","!py-2",3,"click"],[1,"fa-solid","fa-arrow-down-a-z"],[1,"flex","gap-2"],[1,"buttonSecondary","!px-4",3,"click"],[1,"fa-solid","fa-ellipsis-vertical","text-base","hover:cursor-pointer"],[1,"buttonPrimary"],[1,"listHeight","w-2/3","px-4","overflow-y-auto"],[1,"p-12","text-center","text-lg"],[1,"text-base"],[1,"fa-solid","fa-circle-question","text-xl"],[1,"buttonPrimary",3,"click"],[1,"fa-solid","fa-plus","text-base","hover:cursor-pointer"],[3,"onValueChange","onAdd","onRemove","translation","selectedLang"],[1,"flex","items-center","px-3","w-2/3","h-[34px]","animate-pulse"],[1,"h-2.5","rounded-full","w-full","mb-4"],[1,"font-semibold","text-neutral-600","dark:","dark:text-neutral-500"]],template:function(t,e){if(t&1){let p=x();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5,0),v("click",function(){s(p);let m=P(4);return c(e.showDropGeneral(m,"language"))}),C(5,ie,1,2,"span",6)(6,ne,1,0),d(7,"i",7),a(),r(8,"div",8),d(9,"i",9),r(10,"input",10),g(11,"translate"),R("ngModelChange",function(m){return s(p),H(e.searchValue,m)||(e.searchValue=m),c(m)}),v("blur",function(){return s(p),c(e.searchValueChange())}),a()(),r(12,"div",11),v("click",function(){return s(p),c(e.clickSortTranslation())}),d(13,"i",12),r(14,"span"),j(15),g(16,"translate"),a()()(),r(17,"div",13)(18,"div",14,1),v("click",function(){s(p);let m=P(19);return c(e.showDropGeneral(m,"extra"))}),d(20,"i",15),a(),C(21,oe,5,3,"div",16),a()(),r(22,"div",17),M(23,le,4,0,null,null,L,!1,se,4,3,"div",18),a()()}if(t&2){let p;u(5),D(5,e.comunicationService.selectedLang()?5:6),u(5),N("ngModel",e.searchValue),O("aria-label",h(11,6,"SEARCH")),u(5),w(h(16,8,"FUNCTION.SORT_GLOBAL")),u(6),D(21,e.comunicationService.selectedLang()?21:-1),u(2),A((p=e.comunicationService.project())==null?null:p.translations)}},dependencies:[X,J,K,Q,Y,q,z],styles:[".tempCol[_ngcontent-%COMP%]{grid-template-columns:200px auto 86px}.listHeight[_ngcontent-%COMP%]{height:calc(100vh - 182px)}"]});let i=o;return i})();export{Me as PrjTranslationComponent};
